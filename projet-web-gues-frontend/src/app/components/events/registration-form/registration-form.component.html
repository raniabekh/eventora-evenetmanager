<!-- src/app/components/events/registration-form/registration-form.component.html -->
<div class="registration-form-container">
  <!-- En-tête -->
  <div class="form-header">
    <h2>Inscription à l'événement</h2>
    <p class="event-title">{{ eventTitle }}</p>

    <!-- Message de succès -->
    <div *ngIf="showSuccess" class="success-message">
      <div class="success-icon">✅</div>
      <p>Inscription envoyée avec succès !</p>
      <p class="success-sub">Redirection en cours...</p>
    </div>
  </div>

  <!-- Formulaire (masqué si succès) -->
  <form *ngIf="!showSuccess" (ngSubmit)="onSubmit()" #registrationForm="ngForm" class="registration-form">
    <!-- Affichage des erreurs générales -->
    <div *ngIf="errors.length > 0" class="error-alert">
      <div class="error-icon">⚠️</div>
      <div class="error-messages">
        <p *ngFor="let error of errors" class="error-text">{{ error }}</p>
      </div>
    </div>

    <!-- Nom complet -->
    <div class="form-group">
      <label for="participantName" class="form-label">
        Nom complet *
      </label>
      <input
        type="text"
        id="participantName"
        [(ngModel)]="formData.participantName"
        name="participantName"
        required
        class="form-input"
        placeholder="Votre nom et prénom"
        [class.error]="hasError('nom')"
      >
      <small class="hint">Le nom doit correspondre à votre pièce d'identité</small>
    </div>

    <!-- Email -->
    <div class="form-group">
      <label for="participantEmail" class="form-label">
        Email *
      </label>
      <input
        type="email"
        id="participantEmail"
        [(ngModel)]="formData.participantEmail"
        name="participantEmail"
        required
        class="form-input"
        placeholder="votre@email.com"
        [class.error]="hasError('email')"
      >
      <small class="hint">Vous recevrez la confirmation à cette adresse</small>
    </div>

    <!-- Téléphone -->
    <div class="form-group">
      <label for="participantPhone" class="form-label">
        Téléphone
        <span class="optional">(optionnel)</span>
      </label>
      <input
        type="tel"
        id="participantPhone"
        [(ngModel)]="formData.participantPhone"
        name="participantPhone"
        class="form-input"
        placeholder="06 12 34 56 78"
        (input)="formatPhone($event)"
        [class.error]="hasError('téléphone')"
      >
      <small class="hint">Format: 06 12 34 56 78 ou 0612345678</small>
    </div>

    <!-- Conditions -->
    <div class="form-group checkbox-group">
      <label class="checkbox-label">
        <input
          type="checkbox"
          [(ngModel)]="formData.acceptTerms"
          name="acceptTerms"
          required
          class="checkbox-input"
        >
        <span class="checkbox-custom"></span>
        <span class="checkbox-text">
          J'accepte les
          <a href="/terms" class="terms-link" target="_blank">conditions générales</a>
          *
        </span>
      </label>
      <small class="hint">Champ obligatoire pour l'inscription</small>
    </div>

    <!-- Actions -->
    <div class="form-actions">
      <button
        type="button"
        (click)="onCancel()"
        class="btn btn-secondary"
        [disabled]="isLoading"
      >
        Annuler
      </button>

      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="isLoading || !formData.acceptTerms"
      >
        <span *ngIf="!isLoading">
          ✅ S'inscrire
        </span>
        <span *ngIf="isLoading">
          <span class="spinner-small"></span> Traitement...
        </span>
      </button>
    </div>
  </form>

  <!-- Pied de page -->
  <div *ngIf="!showSuccess" class="form-footer">
    <p class="footer-note">
      <small>* Champs obligatoires</small>
    </p>
  </div>
</div>
